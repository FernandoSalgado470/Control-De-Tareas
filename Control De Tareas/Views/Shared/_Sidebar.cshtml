@using Control_De_Tareas.Models
@using Control_De_Tareas.Services
@inject IHttpContextAccessor HttpContextAccessor

@{
    var userRole = "admin";
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();

    var userItems = MenuServices.Items
        .Where(m => m.Roles.Contains(userRole))
        .ToList();
}

<aside class="sidebar">
    <nav class="p-3">
        <ul class="nav flex-column">
            @foreach (var item in userItems)
            {
                var isActive = item.Controller == currentController;

                <li class="nav-item mb-1">
                    <a asp-controller="@item.Controller"
                       asp-action="@item.Action"
                       class="nav-link d-flex align-items-center text-black @(isActive ? "active" : "")"
                       style="padding: 0.75rem 1rem; border-left: 3px solid transparent; @(isActive ? "border-left-color: rgba(11, 93, 157, 0.8); background-color: rgba(255,255,255,0.1);" : "")">

                        <!-- Icono Lucide -->
                        <span class="icon-wrapper me-2">
                            <i data-lucide="@item.Icon" width="18" height="18"></i>
                        </span>

                        <span>@item.Label</span>
                    </a>
                </li>
            }
        </ul>
    </nav>
</aside>

<script>
 
    document.addEventListener('DOMContentLoaded', function () {
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    });
</script>